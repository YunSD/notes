# ***线程基础知识***

线程安全性
----
---
>1. 要编写线程安全的代码，其核心在于要对状态访问操作进行管理，特别是对共享的(Shared)和可变的(Mutable)状态的访问。  
>2. 非正式意义上，对象的状态是指存储在状态变量(例如实例或静态域）中的数据
>3. "共享"意味着变量可以由多个线程同时访问，而"可变"则意味着变量的值在生命周期内可以发生变化。
>4. 一个对象是否需要是线程安全的，取决于它是否被多个线程访问。
>>如果当多个线程访问同一个可变的状态变量时没有使用合适的同步，那么程序就会出现错误。有三个方式可以修复这个问腿：  
>>+ 不在线程之间共享该状态变量 
>>+ 将状态变量修改为不可变的变量
>>+ 在访问状态变量时使用同步  
>5. 完全由线程安全类构成的程序并不一定就是线程安全的，而在线程安全类中也可以包含非线程安全的类。

什么是线程安全性
----
---
>1. 在线程安全性的定义中，最核心的概念就是安全性。安全性的定义是，某个类的行为与其规范完全一致。
>2. 线程安全性定义：当多个线程访问某个类，这个类始终都能表现出正确的行为，那么就称这个类是线程安全的。
>>当多个线程访问某个类时，不管运行时环境采用何种调度方式或者这些线程将如何交替执行，并且在主调代码中不需要任何额外的同步或协同，这个类都能表现出正确的行为，那么就成这个类是线程安全的。
>3. 无状态对象一定是线程安全的。

原子性
----
---
在并发编程中，由于不恰当的执行时序而出现不正确的结果是一种非常重要的情况，它有一个正式的名字：竞态条件(Race Condition)
>竞态条件：当某个计算区取决于多个线程的交替执行时序时，俺么就会发生竞态条件。换句话说，就是正确的结果取决于运气。
>静态条件的本质：基于一种可能失效的观察结果来做出判断或者执行某个计算。

内置锁
----
---
1. java 提供了一种内置的锁机制来支持原子性：同步代码块(Synchronized Block)。同步代码块将包括两个部分：一个作为锁的对象引用，一个座位由这个锁保护的代码块。  
2. 每个java对象都可以用做一个实现同步的锁，这些锁被称为内置锁(Intrinsic Lock)或监视器锁(Monitor Lock),线程会在进入同步代码块之前自动获得锁，并且在退出同步代码块时自动释放锁，无论何种方式退出，获得内置锁得唯一途径就是进入由这个锁保护的同步代码块或方法。
3. java 的内置锁相当于一种互斥体(或互斥锁)，这意味着最多只有一个线程能持有这种锁。


重入
----
---